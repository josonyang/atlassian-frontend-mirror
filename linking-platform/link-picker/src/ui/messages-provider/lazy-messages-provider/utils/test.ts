import { fetchMessagesForLocale } from './fetch-messages-for-locale';

// Note: message filenames generated by Traduki differ from the ISO specification expected by react-intl.
// An additional conversion step from hyphens to underscores is needed to import messages when a locale is part of a region (ie. `pt-BR` to `pt_BR`).
// The list of impacted locales is listed in traduki-descriptor-linking-platform-master.yml and has been used to write this test.

describe('fetchMessageForLocale', () => {
	test.each`
		locale     | expected
		${'en-GB'} | ${'en_GB'}
		${'pt-BR'} | ${'pt_BR'}
		${'zh-TW'} | ${'zh_TW'}
		${'en-US'} | ${'en'}
		${'fr'}    | ${'fr'}
	`(
		'should resolve `$expected` messages for the `$locale` locale',
		async ({ locale, expected }) => {
			jest.mock(`../../../../i18n/${expected}`, () => {
				return {
					__esModule: true,
					default: 'OK',
				};
			});
			const result = await fetchMessagesForLocale(locale);
			expect(result).toBe('OK');
		},
	);
});
