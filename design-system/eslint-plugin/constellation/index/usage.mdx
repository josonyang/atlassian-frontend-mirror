---
order: 0
---

import SectionMessage from '@atlaskit/section-message';

This plugin contains rules that should be used when working with the [Atlassian Design System](https://atlassian.design).

## Rules

<!-- START_RULE_TABLE_CODEGEN -->
<!-- @codegenCommand yarn workspace @atlaskit/eslint-plugin-design-system codegen -->

| Rule                                                                               | Description                                                                                            | Recommended | Fixable | Suggestions |
| ---------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------ | ----------- | ------- | ----------- |
| <a href="#consistent-css-prop-usage">consistent-css-prop-usage</a>                 | Ensures consistency with CSS and xCSS prop usages                                                      | Yes         | Yes     |             |
| <a href="#ensure-design-token-usage">ensure-design-token-usage</a>                 | Enforces usage of design tokens rather than hard-coded values.                                         | Yes         | Yes     |             |
| <a href="#ensure-design-token-usage-preview">ensure-design-token-usage/preview</a> | Enforces usage of pre-release design tokens rather than hard-coded values.                             |             | Yes     |             |
| <a href="#ensure-design-token-usage-spacing">ensure-design-token-usage-spacing</a> | NOTE: This rule is deprecated and will be removed imminently. Use `ensure-design-token-usage` instead. |             | Yes     |             |
| <a href="#icon-label">icon-label</a>                                               | Enforces accessible usage of icon labels when composed with Atlassian Design System components.        | Yes         | Yes     |             |
| <a href="#no-banned-imports">no-banned-imports</a>                                 | Disallow importing banned modules.                                                                     | Yes         |         |             |
| <a href="#no-deprecated-apis">no-deprecated-apis</a>                               | Disallow using deprecated APIs.                                                                        | Yes         |         |             |
| <a href="#no-deprecated-design-token-usage">no-deprecated-design-token-usage</a>   | Disallow using deprecated design tokens.                                                               | Yes         | Yes     |             |
| <a href="#no-deprecated-imports">no-deprecated-imports</a>                         | Disallow importing deprecated modules.                                                                 | Yes         |         |             |
| <a href="#no-margin">no-margin</a>                                                 | Disallow using the margin CSS property.                                                                |             |         |             |
| <a href="#no-unsafe-design-token-usage">no-unsafe-design-token-usage</a>           | Enforces design token usage is statically and locally analyzable.                                      | Yes         | Yes     |             |
| <a href="#use-primitives">use-primitives</a>                                       | Encourage the usage of primitives components.                                                          |             | Yes     | Yes         |
| <a href="#use-visually-hidden">use-visually-hidden</a>                             | Enforce usage of the visually hidden component.                                                        | Yes         | Yes     |             |

<!-- END_RULE_TABLE_CODEGEN -->

<!-- START_RULE_CONTENT_CODEGEN -->
<!-- @codegenCommand yarn workspace @atlaskit/eslint-plugin-design-system codegen -->

## consistent-css-prop-usage

> Ensures consistency with CSS prop usage.

<h3>Rationale</h3>

Every product should be defining styles in the same way, using the same tools, enforced by the same linting rules, which we can then all evolve and scale together.

<h3>How the rule works</h3>

This rule checks for the following cases:

- When styles are defined inline.
- When styles are not using `css` object api.
- When styles are coming from outside of the module i.e. using imports.
- When styles are spread inside another styles and not using array composition.

This rule has no options.

<h3>Examples</h3>

üëé Example of **incorrect** code for this rule:

```js
function Button({ children }) {
  return <div css={css({...})}>{children}</div>;
                   ^^^^^^^ css function call used inline (performance issue)
}
```

```js
const container = {
      ^^^^^^^^^ should be a css function call
  zIndex: 10,
};

function Button({ children }) {
  return <button css={container}>{children}</button>;
}
```

```js
import { container } from './styles';
         ^^^^^^^^^ styles should be local, not shared

function Button({ children }) {
  return <button css={container}>{children}</button>;
}
```

```js
const baseContainerStyles = css({
  zIndex: 5,
});

const containerStyles = css({
  ...baseContainerStyles,
  ^^^^^^^^^^^^^^^^^^^^^^ compose styles by providing an array to the css call instead (see example below)
  zIndex: 7,
});

function Button({ children }) {
  return <button css={containerStyles}>{children}</button>;
}
```

üëç Example of **correct** code for this rule:

```js
const containerStyles = css({
  zIndex: 1,
});

function Button({ children }) {
  return <button css={containerStyles}>{children}</button>;
}
```

```js
const baseContainerStyles = css({
  zIndex: 5,
});

const containerStyles = css({
  zIndex: 7,
});

function Button({ children }) {
  return (
    <button css={[baseContainerStyles, containerStyles]}>{children}</button>
  );
}
```

## ensure-design-token-usage

Using design tokens results in a harmonious experience for end users whilst providing theming and consistency.
All experiences must use color tokens otherwise when switching between themes, unexpected incidents can occur where not all of the UI is themed.
Space, typography, and shape tokens are strongly recommended to further align our experiences and make future changes easier.

<h3>Examples</h3>

Using anything other than design tokens such as hardcoded values or legacy theme colors will be considered violations.

#### Incorrect

```js
import { e100 } from '@atlaskit/theme/elevation';
import { B100 } from '@atlaskit/theme/colors';

css({ color: 'red' });
              ^^^
css({ boxShadow: '0px 1px 1px #161A1D32' });
                              ^^^^^^^^^
css`${e100};`;
      ^^^^
css({ color: B100 });
             ^^^^
```

#### Correct

```js
import { token } from '@atlaskit/tokens';

css({ color: token('color.text.danger') });

css({ boxShadow: token('elevation.shadow.card') });
```

#### Incorrect

```js
css({ padding: '16px' });
                ^^^
css({ margin: gridSize() });
              ^^^^^^^^^^
```

#### Correct

```js
import { token } from '@atlaskit/tokens';

css({ padding: token('space.100') });
```

<h3>Options</h3>

This rule comes with options to aid in migrating to design tokens.

#### domains

An array specifiying which token domains to lint against (`color`, `spacing`, `typography`, `shape`). Defaults to [`'color'`] if not provided.

#### applyImport

When `true`, the rule when automatically add imports to the `@atlaskit/tokens` package where tokens are auto-fixed. Defaults to `true` if not provided.

#### shouldEnforceFallbacks

When `true` the rule will add in stub fallbacks when choosing a suggestion in your IDE. Defaults to `false` if not provided.

#### exceptions

An array specifying strings to ingore when linting.

## ensure-design-token-usage/preview

This rule is a clone of `ensure-design-token-usage` and is intended to allow you to set some domains to `warn` before they are set to `error` in the main rule.

See `ensure-design-token-usage` for full usage documentation.

## ensure-design-token-usage-spacing

This rule is deprecated and will be removed imminently. Use `ensure-design-token-usage` instead.

## icon-label

Icon labels are used to describe what the icon is so the visually impaired can be described what the UI element is.
There are cases where icons should have labels as well as cases where they shouldn't be labelled.

<h3>Examples</h3>

This rule will find violations for when an icon label is or isn't needed when composed with other Design System components.

#### Incorrect

```js
import ActivityIcon from '@atlaskit/icon/glyph/activity'

<ActivityIcon>
^^^^^^^^^^^^^^ missing `label` prop

<Button iconLeft={<ActivityIcon label="">} />
                                ^^^^^ label should be defined

<ButtonItem iconBefore={<ActivityIcon label="">}>
                                      ^^^^^ label should not be defined
  My activity
</ButtonItem>
```

#### Correct

```js
import ActivityIcon from '@atlaskit/icon/glyph/activity'

<ActivityIcon label="Activity">

<Button iconLeft={<ActivityIcon label="Activity">} />

<ButtonItem iconBefore={<ActivityIcon label="">}>
  My activity
</ButtonItem>
```

## no-banned-imports

Using private or experimental packages is dangerous as they are not supported across major versions meaning you will not be able to migrate easily causing friction for yourself and the Atlassian Design System team.

<h3>Examples</h3>

Anything that is considered private or experimental will be marked as violations.

#### Incorrect

```ts
import noop from '@atlaskit/ds-lib/noop';
                  ^^^^^^^^^^^^^^^^^^^^^

import { Text } from '@atlaskit/ds-explorations';
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
```

## no-deprecated-apis

Props across the Atlassian Design System can be deprecated when they are deemed no-longer fit for purporse or dangerous and risk effective use at scale.

<h3>Examples</h3>

Anything that can be used as props from Atlassian Design System components can be violations when marked as deprecated.

#### Incorrect

```tsx
<ButtonItem cssFn={cssFn()} />
            ^^^^

<Drawer overrides={overrides} />
        ^^^^^^^^^
```

<h3>Options</h3>

The rule can take one option: `deprecatedConfig`,
if not provided the rule will use an internal config.
If provided the rule will use the passed in config instead.

#### deprecatedConfig

The following fields can be defined in the config:

- `deprecatedProp`, which is the deprecated props. Each prop has the following fields:
  - `moduleSpecifier`, which is the module specifier of the package in which the prop was deprecated. For example: `@atlaskit/button`.
  - `namedSpecifier` **(optional)**, which is an array of named specifiers of the package in which the prop was deprecated. For example: `Button`.
  - `actionableVersion` **(optional)**, which is the version of the package in which the prop can be actioned on. For example: `1.0.0`.

```json
{
  "cssFn": [
    {
      "moduleSpecifier": "@atlaskit/menu"
    }
  ]
}
```

```js
import { configs } from '@atlaskit/eslint-plugin-design-system';

module.exports = {
  rules: {
    '@atlaskit/design-system/no-deprecated-api': [
      'error',
      {
        deprecatedConfig: {
          cssFn: [
            {
              moduleSpecifier: '@atlaskit/menu',
            },
          ],
        },
      },
    ],
  },
};
```

The plugin also provides a `filterActionableDeprecations` util function that accepts the `deprecated APIs config` and your root `package.json` as params and will filter the default deprecated APIs config based on the package versions installed.

```js
import { configs, filterActionableDeprecations } from '@atlaskit/eslint-plugin-design-system';
import packageJson from './package.json';

rules: {
  '@atlaskit/design-system/no-deprecated-api': ['error', {
    'deprecatedConfig': filterActionableDeprecations(configs.deprecatedConfig, packageJson),
  }]
}
```

## no-deprecated-design-token-usage

Using deprecated design tokens is dangerous as they will eventually be deleted after the sunset period.
This rule helps you move to non-deprecated design tokens.

<h3>Examples</h3>

This rule will mark usage of deprecated design tokens as violations.

<h3>Incorrect</h3>

```js
import { token } from '@atlaskit/tokens';

css({ color: token('i.am.deprecated') });
                    ^^^^^^^^^^^^^^^
css({ color: token('i.am.a.token') });
                    ^^^^^^^^^^^^^
```

<h3>Options</h3>

It's recommended to set this rule to "warn" to allow for new and old tokens to exist side-by-side for the duration of the deprecation period and avoid big-bang migrations.

Once the deprecation period is over for a design token it will be moved into `deleted` state at which point the counterpart of this rule `no-unsafe-design-token-usage` will mark violations as errors.

Running `eslint --fix` will automatically apply replacement tokens if present.

## no-deprecated-imports

Packages across the Atlassian Design System can be deprecated when they are deemed no-longer fit for purporse or dangerous and risk effective use at scale.

<h3>Examples</h3>

This rule will mark usage of deprecated modules as violations.

#### Incorrect

```ts
import Item from '@atlaskit/item';
                  ^^^^^^^^^^^^^^
import GlobalNav from '@atlaskit/global-navigation';
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
```

<h3>Options</h3>

The rule can take one option: `deprecatedConfig`,
if not provided the rule will use an internal config.
If provided the rule will use the passed in config instead.

#### deprecatedConfig

The following fields can be defined in the config:

- `packagePath`, which is the name of the package. For example: `@atlaskit/navigation-next` and `@atlaskit/navigation`.
  With the package path as the key, you can either provide the values as:
  - `message` **(optional)**, the message to display when the deprecated packages path is used. For example: `multi-select is deprecated. Please use '@atlaskit/select' instead.`
    Or as:
  - `imports`, which is an array of named imports to be deprecated. Each named import has the following fields:
    - `importName`, which is the name of the import to be deprecated. For example: `assistive` and `visuallyHidden`.
    - `message` **(optional)**, which is the message to display when the deprecated import is used. For example: `The assistive mixin is deprecated. Please use `@atlaskit/visually-hidden` instead.`.

```json
{
  "@atlaskit/navigation-next": {
    "message": "navigation-next is deprecated. Please use '@atlaskit/atlassian-navigation' instead."
  }
}
```

```js
import packageJson from './package.json';

module.exports = {
  rules: {
    '@atlaskit/design-system/no-deprecated-imports': [
      'error',
      {
        deprecatedConfig: {
          '@atlaskit/navigation-next': {
            message:
              "navigation-next is deprecated. Please use '@atlaskit/atlassian-navigation' instead.",
          },
        },
      },
    ],
  },
};
```

## no-margin

Using margins to define spacing results in components that can't be readily reused in other contexts breaking the composition model.
Instead defining spacing in parents with flex and grid using the `gap` property will result in more resilient experiences.

<h3>Examples</h3>

This rule will mark all margin use as violations.

#### Incorrect

```tsx
css({ margin: '10px' });
```

#### Correct

```tsx
css({ gap: token('spacing.100') });
```

## no-unsafe-design-token-usage

Using design tokens in an unsafe way risks the health of the system and will effect how fast your codebase can migrate between versions.

<h3>Examples</h3>

This rule will mark design token usage that is not statically and locally analyzable,
as well as design tokens that are considered deleted.

<h3>Incorrect</h3>

```js
const textColor = 'red';

css({ color: textColor });
             ^^^^^^^^^ must be a string literal
```

```js
css({ boxShadow: '0px 1px 1px var(--ds-accent-subtleBlue)' });
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^ must use the token() function
```

<h3>Correct</h3>

```js
import { token } from '@atlaskit/tokens';

css({ boxShadow: token('elevation.shadow.card') });

css`
  color: ${(token('color.text.highemphasis'), N20)};
`;
```

<h3>Options</h3>

This rule comes with options to aid in migrating to design tokens.

#### shouldEnforceFallbacks

When `true` the rule will mark token function usage as violations when fallbacks aren't defined.
When `false` the rule will mark token function usage as violations when fallbacks are defined.

## use-primitives

Using primitives allows you to delete bespoke component code and replace it with ready made solutions made by the Atlassian Design System Team.

<h3>Examples</h3>

This rule marks code as violations when it can be replaced 1:1 with a primitive component.

#### Incorrect

```js
<div />
^^^^^^^

<Component>
  <div css={someStyles}></div>
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
</Component>
```

#### Correct

```js
<Box />
```

```js
<Component>
  <Box css={someStyles}></Box>
</Component>
```

## use-visually-hidden

Using the visually hidden component allows you to delete bespoke or legacy theme code and replace it with a ready made solution by the Atlassian Design System Team.

<h3>Examples</h3>

This rule marks code as violations when it can be replaced 1:1 with the visually hidden component.

#### Incorrect

```js
import { css } from '@emotion/core';
import { visuallyHidden } from '@atlaskit/theme/constants';

const visuallyHiddenStyles = css({
  width: '1px',
  height: '1px',
  padding: '0',
  position: 'absolute',
  border: '0',
  clip: 'rect(1px, 1px, 1px, 1px)',
  overflow: 'hidden',
  whiteSpace: 'nowrap',
});

const VisuallyHidden = styled.span`${visuallyHidden()}`;
                                     ^^^^^^^^^^^^^^
```

#### Correct

```js
import VisuallyHidden from '@atlaskit/visually-hidden';
```

<!-- END_RULE_CONTENT_CODEGEN -->
